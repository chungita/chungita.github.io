<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-key="project1_title"></title>
    <link rel="stylesheet" href="project-style.css">
 </head>
<body>
    <header>
        <nav>
            <a href="../index.html" data-key="back_home"></a>
            <button id="lang-toggle" data-key="lang_toggle"></button>
        </nav>
    </header>
    <main>
        <article>
            <h1 data-key="project1_title"></h1>
            
            <div class="image-row">
                <img src="../files/projects/project_1/ultrasound_assisted_thrombosis_catheter.png" alt="Ultrasound-assisted Thrombolytic Catheter">
            </div>

            <section>
                <h2 data-key="project1_overview_title"></h2>
                <p data-key="project1_overview_desc"></p>
            </section>

            <section>
                <h2 data-key="project1_prototype_title"></h2>
                <p data-key="project1_prototype_desc"></p>
                <div class="media-row">
                    <video id="catheter-video" controls>
                        <source src="../files/projects/project_1/catheter.mp4" type="video/mp4">
                    </video>
                    <img id="fpc-image" class="fpc-image" src="../files/projects/project_1/catheter_FPC.jpg" alt="Catheter FPC Design">
                </div>
            </section>

            <section>
                <h2 data-key="project1_types_title"></h2>
                <p data-key="project1_types_desc"></p>
                
                <div class="catheter-types-grid">
                    <div class="catheter-type-item">
                        <img src="../files/projects/project_1/catheter_dynaflex_tube.jpg" alt="Dynaflex Tube Catheter">
                        <p class="image-caption" data-key="project1_dynaflex_caption"></p>
                    </div>
                    <div class="catheter-type-item">
                        <img src="../files/projects/project_1/catheter_zuss_tube.jpg" alt="Zuss Tube Catheter">
                        <p class="image-caption" data-key="project1_zuss_caption"></p>
                    </div>
                    <div class="catheter-type-item">
                        <img src="../files/projects/project_1/catheter_no_tube.jpg" alt="No Tube Catheter">
                        <p class="image-caption" data-key="project1_notube_caption"></p>
                    </div>
                </div>
            </section>

            <section>
                <h2 data-key="project1_welding_title"></h2>
                <p data-key="project1_welding_desc"></p>
                
                <div class="welding-grid">
                    <div class="welding-item">
                        <img src="../files/projects/project_1/weilding_process_1.jpg" alt="Welding Process Step 1">
                        <p class="image-caption" data-key="project1_welding1_caption"></p>
                    </div>
                    <div class="welding-item">
                        <img src="../files/projects/project_1/weilding_process_2.jpg" alt="Welding Process Step 2">
                        <p class="image-caption" data-key="project1_welding2_caption"></p>
                    </div>
                    <div class="welding-item">
                        <img src="../files/projects/project_1/weilding_process_finish_front.jpg" alt="Welding Finished - Front View">
                        <p class="image-caption" data-key="project1_welding_front_caption"></p>
                    </div>
                    <div class="welding-item">
                        <img src="../files/projects/project_1/weilding_process_finish_side.jpg" alt="Welding Finished - Side View">
                        <p class="image-caption" data-key="project1_welding_side_caption"></p>
                    </div>
                    <div class="welding-item">
                        <img src="../files/projects/project_1/weilding_finish_ground_wire.jpg" alt="Ground Wire Welding - Front">
                        <p class="image-caption" data-key="project1_ground_front_caption"></p>
                    </div>
                    <div class="welding-item">
                        <img src="../files/projects/project_1/weilding_finish_ground_wire_side.jpg" alt="Ground Wire Welding - Side">
                        <p class="image-caption" data-key="project1_ground_side_caption"></p>
                    </div>
                </div>
            </section>

            <section>
                <h2 data-key="project1_tech_title"></h2>
                <div data-key="project1_tech_desc"></div>
            </section>

            <section>
                <h2 data-key="project1_applications_title"></h2>
                <div data-key="project1_applications_desc"></div>
            </section>

            <section>
                <h2 data-key="project1_future_title"></h2>
                <div data-key="project1_future_desc"></div>
            </section>
        </article>
    </main>
    <footer>
        <img src="../files/images/game/crafting_table.png" alt="Crafting Table" class="footer-crafting-table">
        <p data-key="footer_text"></p>
    </footer>
    <script src="project-lang.js"></script>
    <script>
        (function(){
            const vid = document.getElementById('catheter-video');
            const img = document.getElementById('fpc-image');
            if(!vid || !img) return;

            function setImgHeight(){
                const rect = vid.getBoundingClientRect();
                const h = Math.round(rect.height);
                if(h <= 0) return;

                img.style.boxSizing = 'border-box';
                img.style.display = 'block';

                const natural = img.naturalHeight || Infinity;
                const target = Math.min(h, natural);

                img.style.maxHeight = target + 'px';
                img.style.height = 'auto';
                img.style.width = 'auto';
                img.style.objectFit = 'contain';
            }

            let resizeTimer = null;
            function debouncedUpdate(){
                if(resizeTimer) clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    setImgHeight();
                    resizeTimer = null;
                }, 100);
            }

            if(window.ResizeObserver){
                const ro = new ResizeObserver(debouncedUpdate);
                ro.observe(vid);
                const parent = vid.parentElement;
                if(parent) ro.observe(parent);
            } else {
                vid.addEventListener('loadedmetadata', setImgHeight);
                vid.addEventListener('loadeddata', setImgHeight);
                vid.addEventListener('play', setImgHeight);
                window.addEventListener('resize', () => setTimeout(setImgHeight, 120));
                window.addEventListener('load', () => setTimeout(setImgHeight, 200));
            }

            setTimeout(setImgHeight, 250);
        })();
    </script>
</body>
</html>
